<?xml version="1.0" encoding="utf-8" ?>
<UserControl
    x:Class="BedrockBoot.Controls.PersonPictureButton"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:dev="using:DevWinUI"
    xmlns:local="using:BedrockBoot.Controls"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:media="using:ABI.Microsoft.UI.Xaml.Media"
    mc:Ignorable="d">

    <Button
        Width="42"
        Height="42"
        Margin="4"
        Padding="0"
        Style="{ThemeResource SubtleButtonStyle}"
        ToolTipService.ToolTip="{x:Bind PersonName}">
        <PersonPicture
            Width="32"
            Height="32"
            Margin="0,0,0,0"
            ProfilePicture="{x:Bind ProfilePictureSource}" />
        <Button.Flyout>
            <Flyout>
                <Grid
                    Width="256"
                    Height="128"
                    Margin="-24,-24,-24,-24"
                    Padding="0">
                    <Grid.Background>
                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                            <GradientStop x:Name="GradientStop1" Offset="0.0" Color="{x:Bind MainColor}" />
                            <GradientStop x:Name="GradientStop3" Offset="2" Color="Transparent" />
                        </LinearGradientBrush>
                    </Grid.Background>
                    <StackPanel Margin="16">
                        <TextBlock
                            Margin="4,0,0,0"
                            Foreground="{x:Bind TextColor}"
                            Style="{ThemeResource SubtitleTextBlockStyle}"
                            Text="{x:Bind PersonName}" />
                        <TextBlock
                            Margin="4,2,0,0"
                            Foreground="{x:Bind TextColor}"
                            FontSize="12"
                            Text="{x:Bind PersonWork}" />
                        <ContentControl Content="{x:Bind FlyoutContent}" />
                    </StackPanel>
                    <dev:OpacityMaskView
                        Width="128"
                        Height="128"
                        MaxHeight="500"
                        Padding="0"
                        HorizontalAlignment="Right"
                        VerticalAlignment="Center">
                        <dev:OpacityMaskView.OpacityMask>
                            <LinearGradientBrush MappingMode="RelativeToBoundingBox" StartPoint="0,0" EndPoint="1,0">
                                <GradientStop Offset="1" Color="#FFFFFFFF" />
                                <GradientStop Offset="0.2" Color="Transparent" />
                            </LinearGradientBrush>
                        </dev:OpacityMaskView.OpacityMask>
                        <Image
                            Width="128"
                            Height="128"
                            Margin="0"
                            HorizontalAlignment="Right"
                            Source="{x:Bind ProfilePictureSource}"
                            Stretch="UniformToFill" />
                    </dev:OpacityMaskView>
                </Grid>
            </Flyout>
        </Button.Flyout>

    </Button>
</UserControl>
